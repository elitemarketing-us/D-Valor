<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Calculadora de Funil — Mentoria D-Valor</title>

  <style>
    :root{
      --bg: #0F0815;
      --stroke: rgba(255,255,255,.10);
      --text: #F4F1FF;
      --muted:#CFC6EA;

      --brand: #8D0EB7;
      --track: rgba(255,255,255,.16);

      --ok: #BFF3CF;
      --okText: #0C2A16;

      --shadow: 0 18px 40px rgba(0,0,0,.35);
      --radius: 16px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Helvetica Neue";
      background: radial-gradient(900px 600px at 20% 10%, rgba(141,14,183,.25), transparent 60%),
                  radial-gradient(800px 500px at 80% 20%, rgba(176,26,226,.18), transparent 55%),
                  var(--bg);
      color:var(--text);
    }

    .wrap{
      max-width: 1100px;
      margin: 24px auto;
      padding: 0 16px 40px;
    }

    .topbar{
      display:flex;
      align-items:center;
      justify-content:flex-end;
      margin-bottom:14px;
    }
    .logo img{
      height: 46px;
      width:auto;
      display:block;
      filter: drop-shadow(0 10px 20px rgba(0,0,0,.35));
    }

    .grid{
      display:grid;
      grid-template-columns: 1.05fr .95fr;
      gap:18px;
    }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border: 1px solid var(--stroke);
      border-radius: var(--radius);
      padding: 18px;
      box-shadow: var(--shadow);
    }

    .title{
      font-size: 18px;
      font-weight: 800;
      margin: 0 0 10px;
      letter-spacing:.2px;
    }
    .subtitle{
      margin: 0 0 18px;
      color: var(--muted);
      font-size: 13px;
      line-height: 1.35;
    }

    .row{
      margin: 14px 0;
      padding: 12px 12px;
      border-radius: 14px;
      background: rgba(0,0,0,.14);
      border:1px solid rgba(255,255,255,.06);
    }
    .rowTop{
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:12px;
      margin-bottom: 10px;
    }
    .label{
      font-weight: 800;
      font-size: 13px;
    }
    .val{
      font-variant-numeric: tabular-nums;
      font-weight: 900;
      font-size: 13px;
      color: #fff;
      opacity:.95;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.08);
      white-space: nowrap;
    }

    input[type="range"]{
      width:100%;
      cursor:pointer;
      accent-color: var(--brand);
    }

    .resultsHeader h2{
      margin:0 0 10px;
      font-size: 18px;
      font-weight: 900;
      letter-spacing:.25px;
    }

    .kpi{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
      padding: 14px 14px;
      border-radius: var(--radius);
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.05);
      margin: 12px 0;
    }
    .kpi strong{
      font-size: 13px;
      letter-spacing:.2px;
    }
    .kpi .num{
      font-variant-numeric: tabular-nums;
      font-weight: 950;
      font-size: 16px;
    }

    .kpi.ok{
      background: var(--ok);
      border-color: rgba(0,0,0,.08);
      color: var(--okText);
    }

    @media (max-width: 920px){
      .grid{ grid-template-columns: 1fr; }
      .logo img{ height: 42px; }
    }
  </style>
</head>

<body>
  <div class="wrap">

    <div class="topbar">
      <div class="logo" aria-label="Logo">
        <img src="logodvalor.png" alt="D-Valor Group" />
      </div>
    </div>

    <div class="grid">
      <!-- CONTROLES -->
      <section class="card">
        <h1 class="title">Calculadora de Funil</h1>
        <p class="subtitle">
          Ajuste as barrinhas. O faturamento recalcula automaticamente.
        </p>

        <div class="row">
          <div class="rowTop">
            <div class="label">Investimento por mês (R$)</div>
            <div class="val" id="vInvest">R$ 1.000,00</div>
          </div>
          <input id="invest" type="range" min="0" max="50000" step="100" value="1000">
        </div>

        <div class="row">
          <div class="rowTop">
            <div class="label">Custo por Lead (R$)</div>
            <div class="val" id="vCpl">R$ 6,00</div>
          </div>
          <input id="cpl" type="range" min="1" max="80" step="1" value="6">
        </div>

        <div class="row">
          <div class="rowTop">
            <div class="label">Taxa de agendamento (%)</div>
            <div class="val" id="vAg">10%</div>
          </div>
          <input id="ag" type="range" min="0" max="100" step="1" value="10">
        </div>

        <div class="row">
          <div class="rowTop">
            <div class="label">Taxa de comparecimento (%)</div>
            <div class="val" id="vShow">50%</div>
          </div>
          <input id="show" type="range" min="0" max="100" step="1" value="50">
        </div>

        <div class="row">
          <div class="rowTop">
            <div class="label">Taxa de conversão (%)</div>
            <div class="val" id="vConv">30%</div>
          </div>
          <input id="conv" type="range" min="0" max="100" step="1" value="30">
        </div>

        <div class="row">
          <div class="rowTop">
            <div class="label">Ticket médio (R$)</div>
            <div class="val" id="vTicket">R$ 2.000,00</div>
          </div>
          <input id="ticket" type="range" min="100" max="20000" step="100" value="2000">
        </div>
      </section>

      <!-- RESULTADO -->
      <aside class="card">
        <div class="resultsHeader">
          <h2>RESULTADO MENSAL</h2>
        </div>

        <div class="kpi ok">
          <strong>Faturamento</strong>
          <div class="num" id="rFat">R$ 0,00</div>
        </div>
      </aside>
    </div>
  </div>

  <script>
    const $ = (id) => document.getElementById(id);

    function fmtBRL(n){
      const v = Math.max(0, Number(n) || 0);
      return v.toLocaleString("pt-BR", { style:"currency", currency:"BRL" });
    }
    function fmtPct(n){
      return `${Math.round(Number(n) || 0)}%`;
    }

    function safeSetText(id, value){
      const el = $(id);
      if (el) el.textContent = value;
    }

    function read(){
      const investEl = $("invest");
      const cplEl    = $("cpl");
      const agEl     = $("ag");
      const showEl   = $("show");
      const convEl   = $("conv");
      const ticketEl = $("ticket");

      return {
        invest: investEl ? Number(investEl.value) : 0,
        cpl:    cplEl    ? Number(cplEl.value)    : 0,
        ag:     agEl     ? Number(agEl.value)/100 : 0,
        show:   showEl   ? Number(showEl.value)/100 : 0,
        conv:   convEl   ? Number(convEl.value)/100 : 0,
        ticket: ticketEl ? Number(ticketEl.value) : 0,
      };
    }

    function renderInputs(s){
      safeSetText("vInvest", fmtBRL(s.invest));
      safeSetText("vCpl",    fmtBRL(s.cpl));
      safeSetText("vAg",     fmtPct(s.ag*100));
      safeSetText("vShow",   fmtPct(s.show*100));
      safeSetText("vConv",   fmtPct(s.conv*100));
      safeSetText("vTicket", fmtBRL(s.ticket));
    }

    function calc(s){
      // funil:
      // leads = invest / cpl
      // agend = leads * ag
      // show  = agend * show
      // vendas= show * conv
      // fatur = vendas * ticket
      const leads   = (s.cpl > 0) ? (s.invest / s.cpl) : 0;
      const agend   = leads * s.ag;
      const showups = agend * s.show;
      const vendas  = showups * s.conv;
      const fatur   = vendas * s.ticket;
      return { fatur };
    }

    function update(){
      try{
        const s = read();
        renderInputs(s);
        const r = calc(s);
        safeSetText("rFat", fmtBRL(r.fatur));
      }catch(e){
        // se algo der errado, não “mata” o update silenciosamente
        console.error("Erro no update:", e);
      }
    }

    function bind(id){
      const el = $(id);
      if (!el) return;
      el.addEventListener("input", update, { passive: true });
      el.addEventListener("change", update, { passive: true });
      el.addEventListener("touchend", update, { passive: true });
    }

    ["invest","cpl","ag","show","conv","ticket"].forEach(bind);

    // garante que atualiza ao carregar (Safari)
    document.addEventListener("DOMContentLoaded", update);
    update();
  </script>
</body>
</html>
